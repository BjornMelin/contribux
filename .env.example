# Database Configuration (Hybrid Development Approach)
# Copy to .env.local and update with actual values

# OPTION 1: Local PostgreSQL Development (Recommended for daily development)
# Fast, offline, zero-cost development
DATABASE_URL="postgresql://your_username@localhost:5432/contribux_dev"
DATABASE_URL_TEST="postgresql://your_username@localhost:5432/contribux_test"

# OPTION 2: Neon Cloud Database (For production-like development)
# Uncomment these lines and comment out local PostgreSQL above
# DATABASE_URL="postgresql://your_user:your_password@your-endpoint-pooler.region.neon.tech/your_database?sslmode=require"
# DATABASE_URL_DEV="postgresql://your_user:your_password@your-dev-endpoint-pooler.region.neon.tech/your_database?sslmode=require"
# DATABASE_URL_TEST="postgresql://your_user:your_password@your-test-endpoint-pooler.region.neon.tech/your_database?sslmode=require"

# Database configuration
DB_PROJECT_ID="your-project-id"
DB_MAIN_BRANCH="br-your-main-branch-id"
DB_DEV_BRANCH="br-your-dev-branch-id"
DB_TEST_BRANCH="br-your-test-branch-id"

# Connection Pool Settings (Neon built-in pooling)
# Neon automatically provides connection pooling via -pooler endpoints
# Transaction pooling mode is used by default
# Optimal for serverless/stateless applications

# For additional client-side pooling if needed:
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=10000

# Vector Search Configuration
HNSW_EF_SEARCH=200
VECTOR_SIMILARITY_THRESHOLD=0.7
HYBRID_SEARCH_TEXT_WEIGHT=0.3
HYBRID_SEARCH_VECTOR_WEIGHT=0.7

# Authentication Configuration (NextAuth.js v5)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-here-minimum-32-characters"
NEXTAUTH_URL="http://localhost:3000"

# OAuth Configuration
# GitHub OAuth App: https://github.com/settings/developers
GITHUB_CLIENT_ID="your-github-client-id"
GITHUB_CLIENT_SECRET="your-github-client-secret"

# GitHub Webhook Configuration
# Generate with: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET="your-github-webhook-secret-here"

# Google OAuth App: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# WebAuthn Configuration
NEXT_PUBLIC_APP_NAME="Contribux"
NEXT_PUBLIC_RP_ID="localhost"
NEXT_PUBLIC_APP_URL="http://localhost:3000"
WEBAUTHN_RP_NAME="Contribux"
# Optional: Explicit WebAuthn RP ID (overrides NEXT_PUBLIC_RP_ID)
# WEBAUTHN_RP_ID="yourdomain.com"
# Optional: Explicit WebAuthn origins (comma-separated)
# WEBAUTHN_ORIGINS="http://localhost:3000,https://yourdomain.com"

# Security Configuration
# 32-byte hex-encoded encryption key for OAuth token encryption
ENCRYPTION_KEY="your-64-character-hex-encoded-encryption-key-here"
CORS_ORIGINS="http://localhost:3000"
# Optional: CSRF secret (minimum 32 characters)
# CSRF_SECRET="your-csrf-secret-here"

# Redis Configuration (Upstash)
# Get these from https://console.upstash.com/redis
UPSTASH_REDIS_REST_URL="https://your-redis-endpoint.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-redis-rest-token"

# Optional: Redis for session storage (if using traditional Redis)
# REDIS_URL="redis://localhost:6379"
# REDIS_PASSWORD="your-redis-password"

# Rate Limiting Configuration
# These values are used as fallbacks if Redis is unavailable
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900

# Feature Flags - Security Portfolio Showcase
ENABLE_WEBAUTHN=true
ENABLE_OAUTH=true
ENABLE_AUDIT_LOGS=true

# Advanced Security Features (Portfolio/Interview Mode)
ENABLE_ADVANCED_SECURITY=false
ENABLE_SECURITY_DASHBOARD=false
ENABLE_DEVICE_FINGERPRINTING=false
ENABLE_DETAILED_AUDIT=false
ENABLE_RATE_LIMITING=true

# WebAuthn Portfolio Configuration
WEBAUTHN_RP_ID="localhost"
WEBAUTHN_ORIGIN="http://localhost:3000"

# AI Configuration
# OpenAI API key for AI-powered features
OPENAI_API_KEY="your-openai-api-key-here"

# Neon API Configuration
# Get from https://console.neon.tech/account/keys
NEON_API_KEY="your-neon-api-key-here"

# Real-time Monitoring & WebSocket
# WebSocket endpoint for real-time dashboard
NEXT_PUBLIC_WS_ENDPOINT="ws://localhost:8080/metrics"

# Security Monitoring Configuration
# Enable comprehensive security audit logging
ENABLE_SECURITY_AUDIT=true
ENABLE_MFA_MONITORING=true
ENABLE_PERFORMANCE_MONITORING=true

# Content Security Policy (CSP) Configuration
# Nonce generation for inline scripts (automatically generated)
CSP_NONCE_SECRET="your-csp-nonce-secret-32-chars-minimum"

# Additional Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_CORS_PROTECTION=true

# Logging
LOG_LEVEL=info

# Node Environment (automatically set but can be overridden)
NODE_ENV=development