# Test Environment Configuration
# 
# This file provides example configuration for running tests.
# Copy to .env.test and update values as needed.
#
# For Neon cloud database testing:
#   - Set DATABASE_URL_TEST to your Neon test branch URL
# 
# For local PostgreSQL testing (recommended for faster tests):
#   - Use docker-compose.test.yml to start local PostgreSQL with pgvector
#   - Use the local PostgreSQL URLs shown below

NODE_ENV=test

# ===========================================
# Database Configuration
# ===========================================

# Option 1: Local PostgreSQL (via docker-compose.test.yml) - RECOMMENDED
DATABASE_URL=postgresql://testuser:testpass@localhost:5432/testdb
DATABASE_URL_TEST=postgresql://testuser:testpass@localhost:5432/testdb

# Option 2: Neon cloud database (uncomment and update with your credentials)
# DATABASE_URL=postgresql://[user]:[password]@[host]/[database]?sslmode=require
# DATABASE_URL_TEST=postgresql://[user]:[password]@[host]/[database]?sslmode=require

# Neon project configuration (required even for local testing)
DB_PROJECT_ID=test-project
DB_MAIN_BRANCH=test-main
DB_DEV_BRANCH=test-dev
DB_TEST_BRANCH=test-test

# Database pool settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=10000

# ===========================================
# Authentication Configuration
# ===========================================

# WebAuthn configuration
WEBAUTHN_RP_ID=localhost
WEBAUTHN_RP_NAME=Contribux Test
WEBAUTHN_ORIGINS=http://localhost:3000
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_RP_ID=localhost

# OAuth configuration (mock values that meet validation requirements)
GITHUB_CLIENT_ID=test1234567890abcdef
GITHUB_CLIENT_SECRET=test-github-client-secret-with-sufficient-length-for-testing-purposes-to-meet-40-char-requirement
GITHUB_REDIRECT_URI=http://localhost:3000/api/auth/github/callback

# JWT configuration
JWT_SECRET=test-jwt-secret-with-sufficient-length-and-entropy-for-testing-purposes-only

# Encryption key (64 hex chars = 32 bytes)
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# Legacy encryption key format (for backward compatibility tests)
OAUTH_ENCRYPTION_KEY=test-encryption-key-32-bytes-long

# ===========================================
# Vector Search Configuration
# ===========================================

HNSW_EF_SEARCH=200
VECTOR_SIMILARITY_THRESHOLD=0.7
HYBRID_SEARCH_TEXT_WEIGHT=0.3
HYBRID_SEARCH_VECTOR_WEIGHT=0.7

# ===========================================
# Application Settings
# ===========================================

PORT=3000
NEXT_PUBLIC_APP_NAME=Contribux Test

# Rate limiting (relaxed for tests)
RATE_LIMIT_MAX=1000
RATE_LIMIT_WINDOW=900

# CORS configuration
CORS_ORIGINS=http://localhost:3000
ALLOWED_REDIRECT_URIS=http://localhost:3000/api/auth/github/callback

# ===========================================
# Test-Specific Settings
# ===========================================

# Debugging options
DEBUG_TESTS=false
SKIP_ENV_VALIDATION=false

# Security settings for tests
LOG_LEVEL=error
ENABLE_AUDIT_LOGS=false
ENABLE_WEBAUTHN=true
ENABLE_OAUTH=false
MAINTENANCE_MODE=false